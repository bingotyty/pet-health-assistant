# 🐾 宠物粪便识别 MVP --- PRD

## 1. 背景与目标

-   宠物主人每天都会处理宠物粪便，这是**最高频的健康观察场景**。\
-   主人缺乏专业知识，难以判断便便是否异常。\
-   本产品提供 **拍照识别 +
    AI健康建议**，解决宠物主的焦虑，帮助早期发现潜在健康问题。

🎯 **目标**：MVP
阶段实现宠物便便健康的初步识别与就医建议，建立基础用户习惯。

------------------------------------------------------------------------

## 2. 用户画像

-   **主要用户**：猫/狗主人（20--45岁，城市，注重宠物健康）。\
-   **痛点**：
    -   无法判断便便是否健康。\
    -   不知道是否需要立刻去医院。\
    -   想有一个简单的记录工具。

------------------------------------------------------------------------

## 3. 功能需求

### 3.1 核心功能

1.  **拍照上传**
    -   用户拍摄或上传宠物粪便照片。\
    -   支持多张上传。
2.  **AI识别（Qwen 多模态）**
    -   模型识别颜色、形状、稠度、血丝等特征。\
    -   分类结果（示例）：
        -   ✅ 正常\
        -   ⚠️ 轻度异常（可能饮食问题）\
        -   ❌ 严重异常（建议立即就医）
3.  **健康报告生成（OpenAI GPT）**
    -   输入识别结果 + 用户文字描述（如饮食、是否呕吐）。\
    -   输出自然语言报告：
        -   当前粪便状态描述\
        -   风险等级（低/中/高）\
        -   建议行动（观察/饮食调整/立刻就医）
4.  **历史记录 & 趋势**
    -   每次识别结果存档到 Supabase。\
    -   展示趋势（比如最近 7 天便便状态）。

### 3.2 次要功能（可选MVP+）

-   用户填写宠物基础档案（名字、年龄、品种）。\
-   异常时提醒（短信/推送）。\
-   导出健康档案 PDF。

------------------------------------------------------------------------

## 4. 非功能需求

-   响应速度：上传 → 报告 ≤ 5 秒（理想）。\
-   隐私：所有图片存储在 Supabase，需加密 & 用户可随时删除。\
-   可扩展性：后续支持 **更多健康特征**（呕吐物、尿液、眼屎等）。

------------------------------------------------------------------------

## 5. 技术方案

### 5.1 前端（Next.js）

-   上传组件（支持相机调用 & 相册选择）。\
-   结果展示卡片（AI分析 + 报告 + 建议）。\
-   历史记录列表 & 详情页。

### 5.2 后端（Supabase）

-   **存储**：宠物照片（加密存储）。\
-   **数据库表**：
    -   users（用户）\
    -   pets（宠物档案）\
    -   feces_records（粪便识别记录：图片、AI结果、风险等级、报告）\
-   **鉴权**：用户登录（邮箱/社交登录）。

### 5.3 AI 模型调用

1.  **Qwen-VL**（开源，部署在后端或调用 API）

    -   输入：宠物粪便照片。\
    -   输出：JSON 格式的粪便特征 + 初步分类。

    ``` json
    {
      "color": "brown",
      "texture": "soft",
      "blood": false,
      "worms": false,
      "classification": "mild_abnormal"
    }
    ```

2.  **OpenAI GPT**（云端 API）

    -   输入：Qwen 识别结果 + 用户补充描述。\
    -   输出：自然语言健康报告。

    示例：

        粪便呈褐色但质地偏软，未见血丝。可能与饮食变化相关。
        风险等级：低
        建议：观察1-2天，若持续软便请考虑就医。

------------------------------------------------------------------------

## 6. 用户流程（MVP）

1.  打开 APP → 点击【拍照识别】\
2.  上传照片 → Qwen 分析 → JSON 输出\
3.  调用 GPT → 生成自然语言报告\
4.  前端展示结果卡片（状态 + 建议）\
5.  数据存档 → 可在【历史记录】查看

------------------------------------------------------------------------

## 7. 成功指标（MVP阶段）

-   用户粪便拍照识别 ≥ **10次/人/月**\
-   日活留存率 ≥ **30%**\
-   用户对识别准确度满意度 ≥ **80%**

------------------------------------------------------------------------

## 8. 未来拓展

-   多宠物档案管理\
-   异常检测提醒（推送通知）\
-   与宠物医院 API 对接（预约挂号）\
-   商业化：会员制（趋势分析、深度报告） + 宠物保险对接
